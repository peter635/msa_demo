<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>商品一覧ページ</title>

    <script>
      // Example product ID for the product being viewed (you can dynamically set this)
      const productIdArray = ["id1", "id2", "id3"]; // Replace "id1" with the actual product ID dynamically

      // Push the data into the GTM data layer
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        productid: productIdArray, // Array format for product IDs
        pagetype: "product",
      });
    </script>

    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 0;
        height: 100vh;
        background-color: #f5f5f5;
      }

      h1 {
        margin-top: 20px;
        color: #333;
      }

      .product-list {
        display: flex;
        justify-content: center;
        gap: 30px;
      }

      .product {
        text-align: center;
      }

      .product-id {
        margin-bottom: 10px;
        font-weight: bold;
      }

      .product img {
        width: 200px;
        height: 200px;
        object-fit: cover;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

      .add-to-cart {
        margin-top: 10px;
        padding: 10px 20px;
        background-color: red;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .add-to-cart:hover {
        background-color: darkred;
      }
    </style>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-NC6J7J52");
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <h1>商品一覧ページ</h1>

    <!-- Add your dynamic product IDs in the data layer -->
    <!-- <script>
      window.uetq = window.uetq || [];
      window.uetq.push("event", "", {
        ecomm_prodid: ["id1", "id2", "id3"],
        ecomm_pagetype: "product",
      });
    </script> -->

    <div class="product-list">
      <div class="product" id="id1">
        <div class="product-id">Product ID: id1</div>
        <img src="https://msademo.netlify.app/img/img1.jpeg" alt="Product 1" />
        <div>
          <button class="add-to-cart" onclick="redirectToCart('id1')">
            Add to Cart
          </button>
        </div>
      </div>
      <div class="product" id="id2">
        <div class="product-id">Product ID: id2</div>
        <img src="https://msademo.netlify.app/img/img2.jpeg" alt="Product 2" />
        <div>
          <button class="add-to-cart" onclick="redirectToCart('id2')">
            Add to Cart
          </button>
        </div>
      </div>
      <div class="product" id="id3">
        <div class="product-id">Product ID: id3</div>
        <img src="https://msademo.netlify.app/img/img3.jpeg" alt="Product 3" />
        <div>
          <button class="add-to-cart" onclick="redirectToCart('id3')">
            Add to Cart
          </button>
        </div>
      </div>
    </div>

    <script>
      function redirectToCart(productId) {
        window.location.href = "ec_cart.html?product=" + productId;
      }
    </script>

    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-NC6J7J52"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
  </body>
</html>
