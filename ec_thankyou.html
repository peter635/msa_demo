<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ご購入ありがとうございます</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 0;
        padding: 0;
        height: 100vh;
        background-color: #f5f5f5;
      }

      h1 {
        margin-top: 20px;
        color: #333;
      }

      p {
        font-size: 20px;
        color: #333;
      }

      .return-button {
        margin-top: 20px;
        padding: 10px 20px;
        background-color: green;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }

      .return-button:hover {
        background-color: darkgreen;
      }
    </style>

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-NC6J7J52");
    </script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <h1>ご購入ありがとうございます</h1>

    <p id="thank-you-message"></p>

    <button class="return-button" onclick="goToHomePage()">
      トップページに戻る
    </button>

    <!-- Dynamic Product ID Data Layer -->
    <script>
      // Get product ID from URL query parameters
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get("product");

      // Select the thank you message container
      const messageContainer = document.getElementById("thank-you-message");

      // Show the thank you message with product ID
      if (productId) {
        messageContainer.innerText = `Product ID: ${productId} ご購入ありがとうございます`;
      } else {
        messageContainer.innerText = "Product not found.";
      }

      // Redirect to the product page
      function goToHomePage() {
        window.location.href = "ec_product.html"; // Replace 'index.html' with your actual product listing page filename
      }

      // Dynamic Data Layer for the purchase
      window.uetq = window.uetq || [];
      window.uetq.push("event", "", {
        ecomm_prodid: [productId], // Dynamically add the chosen product ID
        ecomm_pagetype: "purchase", // Set pagetype to purchase
      });
    </script>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-NC6J7J52"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->
  </body>
</html>
